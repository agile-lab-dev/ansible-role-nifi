---
- name: Populate service facts
  ansible.builtin.service_facts:

- debug:
    msg: "WARNING: systemd was not detected, skipping adding nifi to services"
  when: "not ansible_facts.services is defined or not 'systemd' in ansible_facts.services"

- name: Copy systemd template
  template:
    src: "templates/nifi.service.j2"
    dest: "/etc/systemd/system/nifi.service"
  when: "ansible_facts.services is defined and 'systemd' in ansible_facts.services"

- name: Enable NiFi service
  systemd:
    name: nifi
    daemon_reload: yes
    enabled: yes
  when: "ansible_facts.services is defined and 'systemd' in ansible_facts.services"
